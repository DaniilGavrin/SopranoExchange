import telebot
from telebot import *
from telebot.callback_data import *
import database.db as db

def accept_user(bot, message):
    """
    –ü—Ä–∏–Ω–∏–º–∞–µ—Ç –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –ø—Ä–∞–≤–∏–ª–∞–º–∏ –±–æ—Ç–∞.

    user_id - —á–∏—Å–ª–æ–≤–æ–π id –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –ø–æ–ª—É—á–∞–µ—Ç—Å—è –∏–∑ –≤—Ö–æ–¥—è—â–µ–≥–æ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –∫–æ—Ç–æ—Ä—ã–µ –¥–æ—Å—Ç–∞–µ—Ç id –∏–∑ chat –ø–æ message.chat.id
    –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É –æ –ø—Ä–∏–Ω—è—Ç–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º —Å–æ–≥–ª–∞—à–µ–Ω–∏—è.

    try –±–ª–æ–∫:
        –û–±—Ä–∞—â–∞–µ—Ç—Å—è –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ –º–æ–¥—É–ª—å db –∏ —Ñ—É–Ω–∫—Ü–∏—é new_user
        –ß–µ—Ä–µ–∑ menu –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –∏ types -> menu —Å–æ–∑–¥–∞–µ—Ç—Å—è –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –∫–æ—Ç–æ—Ä–∞—è –±—É–¥–µ—Ç –≤ —á–∞—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –æ–∫–æ–ª–æ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã –≤—Å–µ–≥–¥–∞
        user == True:
            –ï—Å–ª–∏ –≤–µ—Ä–Ω–æ —Ç–æ:
                –ü—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∑–∞–ø–∏—Å—å —Ñ–∞–π–ª–∞ –≥–ª–∞–≤–Ω–æ–≥–æ –º–µ–Ω—é –≤ –ø–∞–º—è—Ç—å,
                –û—Ç–ø—Ä–∞–≤–∫–∞ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è —Å –∞–∫—Ç–∏–≤–∞—Ü–∏–µ–π –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã
            –ï—Å–ª–∏ –Ω–µ –≤–µ—Ä–Ω–æ —Ç–æ:
                –ü—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∑–∞–ø–∏—Å—å —Ñ–∞–π–ª–∞ –≥–ª–∞–≤–Ω–æ–≥–æ –º–µ–Ω—é –≤ –ø–∞–º—è—Ç—å,
                –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è –æ —Ç–æ–º —á—Ç–æ –ø–æ–≤—Ç–æ—Ä–Ω–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è —Å–∏—Å—Ç–µ–º–∞ –Ω–∞—à–ª–∞ –ø—Ä–æ—Ñ–∏–ª—å —Å—Ç–∞—Ä—ã–π
                –û—Ç–ø—Ä–∞–≤–∫–∞ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è —Å –∞–∫—Ç–∏–≤–∞—Ü–∏–µ–π –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã
    except Exception as e –±–ª–æ–∫:
        –ë–ª–æ–∫ –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–π –≤ —Å–ª—É—á–∞–∏ –∫–æ–≥–¥–∞ —Å–∏—Å—Ç–µ–º–∞ –≤—ã–¥–∞–ª–∞ –∫–∞–∫—É—é-—Ç–æ –æ—à–∏–±–∫—É –∫–æ—Ç–æ—Ä–∞—è –Ω–µ –º–æ–∂–µ—Ç –≤—ã–ø–æ–ª–Ω–∏—Ç—å –≥–ª–∞–≤–Ω—ã–π –±–ª–æ–∫ –∫–æ–¥–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é

        –í—ã–≤–æ–¥ –æ—à–∏–±–∫–∏ –≤ –∫–æ–Ω—Å–æ–ª—å
        –û—Ç–ø—Ä–∞–≤–∫–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É —Å–æ–æ–±—â–∫–µ–Ω–∏—è –æ–± –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–π –æ—à–∏–±–∫–µ —Å–∏—Å—Ç–µ–º—ã
        –û—Ç–ø—Ä–∞–≤–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é —Å–æ–æ–±—â–µ–Ω–∏—è –æ –ø—Ä–æ–±–ª–µ–º–µ –∏ –ø—Ä–æ—Å—å–±–µ –æ–±—Ä–∞—â–µ–Ω–∏—è –∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É

    Parameters:
        bot (TelegramBot): –û–±—ä–µ–∫—Ç –±–æ—Ç–∞ Telegram.
        message (Message): –û–±—ä–µ–∫—Ç —Å–æ–æ–±—â–µ–Ω–∏—è Telegram.

    Returns:
        None
    """
    print("1")
    user_id = message.chat.id
    bot.send_message(-4633769276, f'–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å {user_id} –ø—Ä–∏–Ω—è–ª –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–µ —Å–æ–≥–ª–∞—à–µ–Ω–∏–µ')
    # –£–¥–∞–ª—è–µ–º –ø–æ—Å–ª–µ–¥–Ω–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    try:
        user = db.new_user(user_id)
        menu = types.ReplyKeyboardMarkup(resize_keyboard=True)
        menu1 = types.KeyboardButton(text="üìÅ –ì–ª–∞–≤–Ω–∞—è")
        menu.add(menu1)
        if user == True:
            file = open('Soprano exchange (2).jpg', 'rb')
            bot.send_photo(message.chat.id, file, """üî• –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ CryptoBot!

CryptoBot - –í–∞—à –ª—É—á—à–∏–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–º–æ—â–Ω–∏–∫ –¥–ª—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–≥–æ –∏ –∫–æ–º—Ñ–æ—Ä—Ç–Ω–æ–≥–æ –ø–µ—Ä–µ–≤–æ–¥–∞ RUB –≤ TRX!

–ü–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º —Ä–∞–±–æ—Ç—ã –≤ –Ω–∞—à–µ–º –±–æ—Ç–µ, –ø—Ä–æ—á—Ç–∏—Ç–µ —É—Å–ª–æ–≤–∏—è –ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –±–æ—Ç–æ–º.""", reply_markup=menu)
        else:
            file = open('Soprano exchange (2).jpg', 'rb')
            bot.send_message(message.chat.id, '–í—ã —É–∂–µ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã! –ü–æ–≤—Ç–æ—Ä–Ω–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è')
            bot.send_photo(message.chat.id, file, """üî• –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ CryptoBot!

CryptoBot - –í–∞—à –ª—É—á—à–∏–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–º–æ—â–Ω–∏–∫ –¥–ª—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–≥–æ –∏ –∫–æ–º—Ñ–æ—Ä—Ç–Ω–æ–≥–æ –ø–µ—Ä–µ–≤–æ–¥–∞ RUB –≤ TRX!

–ü–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º —Ä–∞–±–æ—Ç—ã –≤ –Ω–∞—à–µ–º –±–æ—Ç–µ, –ø—Ä–æ—á—Ç–∏—Ç–µ —É—Å–ª–æ–≤–∏—è –ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –±–æ—Ç–æ–º.""", reply_markup=menu)

    except Exception as e:
        print(e)
        bot.send_message(-4633769276, f"–í–Ω–∏–º–∞–Ω–∏–µ!! –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, –≤ —Å–∏—Å—Ç–µ–º–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞! \n{e}")
        bot.send_message(message.chat.id, '–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è! –û–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É! ')

    bot.delete_message(message.chat.id, message.message_id)
    bot.delete_message(message.chat.id, message.message_id - 1)